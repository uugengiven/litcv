<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/tsparticles@1.9.2/dist/tsparticles.min.js"
      integrity="sha256-5kED68Spy7K2CEbfu4CjV92DmZR5ZQFUoIR5qmPzZWg="
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="avatar-orbs.css" />
    <style>
      .pictures {
        width: 100px;
        height: 100px;
        background-color: purple;
        position: absolute;
      }
      .people {
        position: relative;
        height: 30px;
        justify-content: center;
        align-items: center;
        display: flex;
      }
      .scene {
        width: 100%;
        height: 100%;
        justify-content: center;
        align-items: center;
        display: flex;
        flex-direction: column;
      }
      body {
        width: 100vw;
        height: 100vh;
        background-color: black;
      }
      img {
        border-radius: 50%;
        width: 100px;
        height: 100px;
      }
      #one {
        width: 130px;
        height: 130px;
        z-index: 150;
      }
      .particles {
        width: 100vw;
        height: 100vh;
        position: absolute;
        z-index: 0;
        /* background-color: #669add; */
        background-color: #5177a9;
      }
      body {
        margin: 0;
        padding: 0;
      }
    </style>
    <script>
      const setSizes = (x, y, z, distance) => {
        var sizes = {};
        sizes.x = [];
        sizes.x[0] = '-=' + x;
        sizes.x[1] = '+=' + x;
        sizes.x[2] = '+=' + x;
        sizes.x[3] = '-=' + x;

        sizes.y = [];
        sizes.y[0] = '-=' + y;
        sizes.y[1] = '-=' + y;
        sizes.y[2] = '+=' + y;
        sizes.y[3] = '+=' + y;

        sizes.z = [];
        sizes.z[0] = '-=' + z;
        sizes.z[1] = '-=' + z;
        sizes.z[2] = '+=' + z;
        sizes.z[3] = '+=' + z;

        sizes.index = [];
        var zmodifier = z * 100;
        sizes.index[0] = 100;
        sizes.index[1] = 50 - distance;
        sizes.index[2] = 100;
        sizes.index[3] = 200 + distance;

        sizes.shadow = [];
        sizes.shadow[0] = '8px 8px';
        sizes.shadow[1] = '6px 6px';
        sizes.shadow[2] = '8px 8px';
        sizes.shadow[3] = '10px 10px';

        return sizes;
      };
      const startAnimation = (tl, el, x, y, z) => {
        var sizes = setSizes(x, y, z);

        var item = document.querySelector(el);
        item.style.zIndex = sizes.index[3];
        item.style.x = sizes.x[3];
        item.style.y = sizes.y[3];

        for (var i = 0; i < 4; i++) {
          var ease1 = 'power1.in';
          var ease2 = 'power1.out';
          if (i % 2 == 0) {
            ease1 = 'power1.out';
            ease2 = 'power1.in';
          }
          console.log(i, ease1, ease2);
          tl.to(el, { x: sizes.x[i], ease: ease1 }, i * 10);
          // tl.to(el, {y: sizes.y[i], scale: sizes.z[i], boxShadow:"7px 7px " + sizes.shadow[i] + " gray", zIndex: sizes.index[i], ease: ease2}, i * 10);
          tl.to(
            el,
            {
              y: sizes.y[i],
              scale: sizes.z[i],
              zIndex: sizes.index[i],
              ease: ease2
            },
            i * 10
          );
        }
      };

      const doAnimation = () => {
        var tl = gsap.timeline({ defaults: { duration: 10 }, repeat: -1 });

        // startAnimation(tl, "#one", 150, 25, .1);
        startAnimation(tl, '#two', 180, 20, 0.1, 30);
        startAnimation(tl, '#three', 220, 30, 0.15, 40);
        startAnimation(tl, '#four', 400, 40, 0.2, 50);
      };
    </script>
  </head>
  <body onload="init()">
    <div class="particles" id="tsparticles"></div>
    <div class="scene">
      <div class="people">
        <div class="pictures orb orb-one" id="one"></div>
      </div>
      <div class="people">
        <div class="pictures orb orb-two" id="two"></div>
      </div>
      <div class="people">
        <div class="pictures orb orb-three" id="three"></div>
      </div>
      <div class="people">
        <div class="pictures orb orb-four" id="four"></div>
      </div>
    </div>

    <script>
      const init = () => {
        particles();
        doAnimation();
      };

      const particles = () => {
        tsParticles.load('tsparticles', {
          fpsLimit: 60,
          particles: {
            number: {
              value: 50,
              density: {
                enable: true,
                value_area: 800
              }
            },
            color: {
              value: '#ffffff'
            },
            shape: {
              type: 'circle',
              stroke: {
                width: 0
              },
              polygon: {
                nb_sides: 5
              }
            },
            opacity: {
              value: 0.5,
              random: false,
              anim: {
                enable: false,
                speed: 3,
                opacity_min: 0.1,
                sync: false
              }
            },
            size: {
              value: 3,
              random: true,
              anim: {
                enable: false,
                speed: 20,
                size_min: 0.1,
                sync: false
              }
            },
            line_linked: {
              enable: true,
              distance: 100,
              color: '#ffffff',
              opacity: 0.15,
              width: 1
            },
            move: {
              enable: true,
              speed: 1,
              direction: 'none',
              random: false,
              straight: false,
              out_mode: 'out',
              attract: {
                enable: false,
                rotateX: 600,
                rotateY: 1200
              }
            },
            life: {
              duration: {
                sync: false,
                value: 3
              },
              count: 0,
              delay: {
                random: {
                  enable: true,
                  minimumValue: 0.5
                },
                value: 1
              }
            }
          },
          interactivity: {
            detect_on: 'canvas',
            events: {
              onhover: {
                enable: true,
                mode: 'repulse'
              },
              onclick: {
                enable: true,
                mode: 'push'
              },
              resize: true
            },
            modes: {
              grab: {
                distance: 400,
                line_linked: {
                  opacity: 1
                }
              },
              bubble: {
                distance: 400,
                size: 40,
                duration: 2,
                opacity: 0.8
              },
              repulse: {
                distance: 200
              },
              push: {
                particles_nb: 4
              },
              remove: {
                particles_nb: 2
              }
            }
          },
          retina_detect: true
        });
      };

      // const particles = () => {
      //   tsParticles.load('tsparticles', {
      //     fpsLimit: 50,
      //     particles: {
      //       number: {
      //         value: 60,
      //         density: {
      //           enable: true,
      //           value_area: 800
      //         }
      //       },
      //       color: {
      //         value: '#ffffff'
      //       },
      //       shape: {
      //         type: 'circle',
      //         stroke: {
      //           width: 0,
      //           color: '#000000'
      //         },
      //         polygon: {
      //           nb_sides: 5
      //         },
      //         image: {
      //           src: 'img/github.svg',
      //           width: 100,
      //           height: 100
      //         }
      //       },
      //       opacity: {
      //         value: 0.5,
      //         random: false,
      //         anim: {
      //           enable: false,
      //           speed: 1,
      //           opacity_min: 0.1,
      //           sync: false
      //         }
      //       },
      //       size: {
      //         value: 1,
      //         random: true,
      //         anim: {
      //           enable: false,
      //           speed: 40,
      //           size_min: 0.1,
      //           sync: false
      //         }
      //       },
      //       line_linked: {
      //         enable: true,
      //         distance: 150,
      //         color: '#ffffff',
      //         opacity: 0.4,
      //         width: 1
      //       },
      //       move: {
      //         enable: true,
      //         speed: 1,
      //         direction: 'none',
      //         random: false,
      //         straight: false,
      //         out_mode: 'out',
      //         bounce: false,
      //         attract: {
      //           enable: false,
      //           rotateX: 600,
      //           rotateY: 1200
      //         }
      //       }
      //     },
      //     interactivity: {
      //       detect_on: 'canvas',
      //       events: {
      //         onhover: {
      //           enable: true,
      //           mode: 'grab'
      //         },
      //         onclick: {
      //           enable: true,
      //           mode: 'push'
      //         },
      //         resize: true
      //       },
      //       modes: {
      //         grab: {
      //           distance: 150,
      //           line_linked: {
      //             opacity: 1
      //           }
      //         },
      //         bubble: {
      //           distance: 400,
      //           size: 40,
      //           duration: 2,
      //           opacity: 8,
      //           speed: 3
      //         },
      //         repulse: {
      //           distance: 200,
      //           duration: 0.4
      //         },
      //         push: {
      //           particles_nb: 4
      //         },
      //         remove: {
      //           particles_nb: 2
      //         }
      //       }
      //     },
      //     retina_detect: true
      //   });
      // };
    </script>
  </body>
</html>
